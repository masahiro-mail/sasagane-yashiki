<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã•ã•ãŒã­è¨˜æ†¶ã‚²ãƒ¼ãƒ </title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;600;700&family=Zen+Old+Mincho:wght@400;600;700&display=swap');
        .japanese-font {
            font-family: 'Shippori Mincho', 'Zen Old Mincho', serif;
        }
        .ninja-button {
            transition: all 0.3s ease;
        }
        .ninja-button:hover {
            transform: scale(1.1);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.3);
        }
        .ninja-pulse {
            animation: pulse 0.8s ease-in-out;
        }
        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.2); }
            100% { transform: scale(1); }
        }
    </style>
</head>
<body class="japanese-font">
    <div id="app"></div>

    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const ninjaCharacters = [
            { emoji: 'ğŸ', name: 'ã•ã•ãŒã­', color: 'bg-purple-400' },
            { emoji: 'â­', name: 'ã•ãã‚„', color: 'bg-yellow-400' },
            { emoji: 'ğŸŒ¸', name: 'ã¹ã‚“ã¦ã‚“', color: 'bg-pink-400' },
            { emoji: 'âš¡', name: 'ã„ãšãª', color: 'bg-blue-400' },
            { emoji: 'ğŸ’', name: 'ã“ã¯ã', color: 'bg-green-400' },
            { emoji: 'ğŸŒ™', name: 'ã“ã‚“ãŒ', color: 'bg-indigo-400' },
            { emoji: 'ğŸ”®', name: 'ã­ã‚€', color: 'bg-teal-400' },
            { emoji: 'âœ¨', name: 'ã›ãŠã‚Š', color: 'bg-orange-400' },
            { emoji: 'ğŸŒŠ', name: 'ã•ã£ã¨ã°', color: 'bg-cyan-400' },
            { emoji: 'ğŸ®', name: 'ã—ã‚ƒãŠã‚‰ã‚“', color: 'bg-red-400' }
        ];

        function SasaganeMemoryGame() {
            const [gameState, setGameState] = useState('waiting');
            const [sequence, setSequence] = useState([]);
            const [playerSequence, setPlayerSequence] = useState([]);
            const [currentStep, setCurrentStep] = useState(0);
            const [failures, setFailures] = useState(0);
            const [showingIndex, setShowingIndex] = useState(-1);
            const [success, setSuccess] = useState(false);

            const generateSequence = () => {
                const newSequence = [];
                for (let i = 0; i < 10; i++) {
                    newSequence.push(Math.floor(Math.random() * 10));
                }
                return newSequence;
            };

            const startGame = () => {
                const newSequence = generateSequence();
                setSequence(newSequence);
                setPlayerSequence([]);
                setCurrentStep(0);
                setShowingIndex(0);
                setGameState('showing');
                setSuccess(false);
            };

            const showSequence = () => {
                if (showingIndex < sequence.length) {
                    setTimeout(() => {
                        setShowingIndex(prev => prev + 1);
                    }, 800);
                } else {
                    setTimeout(() => {
                        setShowingIndex(-1);
                        setGameState('input');
                    }, 500);
                }
            };

            const handleNinjaClick = (index) => {
                if (gameState !== 'input') return;

                const newPlayerSequence = [...playerSequence, index];
                setPlayerSequence(newPlayerSequence);

                if (newPlayerSequence[currentStep] === sequence[currentStep]) {
                    if (currentStep === sequence.length - 1) {
                        setSuccess(true);
                        setGameState('result');
                    } else {
                        setCurrentStep(prev => prev + 1);
                    }
                } else {
                    const newFailures = failures + 1;
                    setFailures(newFailures);
                    setGameState('result');
                }
            };

            const resetGame = () => {
                setGameState('waiting');
                setSequence([]);
                setPlayerSequence([]);
                setCurrentStep(0);
                setShowingIndex(-1);
                setSuccess(false);
                if (success) {
                    setFailures(0);
                }
            };

            useEffect(() => {
                if (gameState === 'showing') {
                    showSequence();
                }
            }, [gameState, showingIndex]);

            if (gameState === 'waiting') {
                return (
                    <div className="min-h-screen bg-gradient-to-b from-blue-100 to-purple-100 flex flex-col items-center justify-center p-4">
                        <h1 className="text-4xl font-bold text-blue-800 mb-8 japanese-font">é–‹é‹ï¼ã•ã•ãŒã­è¨˜æ†¶è©¦ç·´</h1>
                        
                        <div className="bg-white rounded-lg shadow-lg p-8 max-w-md w-full mb-8 text-center">
                            <div className="text-6xl mb-6">ğŸ§ </div>
                            <p className="text-lg font-bold text-blue-600 mb-6 japanese-font">è¨˜æ†¶åŠ›ã®æ¥µã¿</p>
                            <p className="text-sm text-gray-600 mb-6 japanese-font">
                                10ä½“ã®å¿è€…ãŒå…‰ã‚‹é †åºã‚’è¨˜æ†¶ã—ã€<br />
                                æ­£ç¢ºã«åŒã˜é †åºã§å†ç¾ã™ã¹ã—ï¼<br />
                                1å›æˆåŠŸã«ã¦ã‚²ãƒ¼ãƒ åˆ¶è¦‡<br />
                                å›æ•°åˆ¶é™ãƒ»æ™‚é–“åˆ¶é™ãªã—
                            </p>
                            <div className="text-sm text-gray-500 mb-4 japanese-font">
                                å¤±æ•—å›æ•°: {failures}
                            </div>
                        </div>
                        
                        <button
                            onClick={startGame}
                            className="bg-blue-500 hover:bg-blue-600 text-white font-bold py-4 px-8 rounded-lg text-xl japanese-font"
                        >
                            ã‚²ãƒ¼ãƒ ã‚’å§‹ã‚ã‚“
                        </button>
                    </div>
                );
            }

            if (gameState === 'showing') {
                return (
                    <div className="min-h-screen bg-gradient-to-b from-blue-100 to-purple-100 flex flex-col items-center justify-center p-4">
                        <h1 className="text-4xl font-bold text-blue-800 mb-8 japanese-font">é–‹é‹ï¼ã•ã•ãŒã­è¨˜æ†¶è©¦ç·´</h1>
                        
                        <div className="bg-white rounded-lg shadow-lg p-8 max-w-lg w-full">
                            <div className="text-center mb-6">
                                <h2 className="text-2xl font-bold text-blue-600 mb-2 japanese-font">
                                    é †åºã‚’è¨˜æ†¶ã›ã‚ˆ
                                </h2>
                                <p className="text-sm text-gray-500">
                                    {showingIndex}/{sequence.length}
                                </p>
                            </div>

                            <div className="grid grid-cols-5 gap-3 mb-6">
                                {ninjaCharacters.map((ninja, index) => (
                                    <div
                                        key={index}
                                        className={`w-16 h-16 rounded-lg border-2 border-gray-300 flex flex-col items-center justify-center transition-all duration-300 
                                            ${showingIndex > index ? `${ninja.color} border-gray-800 shadow-lg ninja-pulse` : 'bg-gray-200'}`}
                                    >
                                        <div className="text-lg">{ninja.emoji}</div>
                                    </div>
                                ))}
                            </div>

                            <div className="text-center">
                                <p className="text-lg text-gray-600 japanese-font">
                                    ã‚ˆãè¦‹ã¦é †åºã‚’è¦šãˆã‚ˆ...
                                </p>
                            </div>
                        </div>
                    </div>
                );
            }

            if (gameState === 'input') {
                return (
                    <div className="min-h-screen bg-gradient-to-b from-blue-100 to-purple-100 flex flex-col items-center justify-center p-4">
                        <h1 className="text-4xl font-bold text-blue-800 mb-8 japanese-font">é–‹é‹ï¼ã•ã•ãŒã­è¨˜æ†¶è©¦ç·´</h1>
                        
                        <div className="bg-white rounded-lg shadow-lg p-8 max-w-lg w-full">
                            <div className="text-center mb-6">
                                <h2 className="text-2xl font-bold text-blue-600 mb-2 japanese-font">
                                    é †åºé€šã‚Šã«ã‚¿ãƒƒãƒ—ã›ã‚ˆ
                                </h2>
                                <p className="text-sm text-gray-500">
                                    é€²æ—: {currentStep + 1}/10 | å¤±æ•—å›æ•°: {failures}
                                </p>
                            </div>

                            <div className="grid grid-cols-5 gap-3 mb-6">
                                {ninjaCharacters.map((ninja, index) => (
                                    <button
                                        key={index}
                                        onClick={() => handleNinjaClick(index)}
                                        className={`w-16 h-16 rounded-lg border-2 border-gray-300 flex flex-col items-center justify-center ninja-button ${ninja.color} hover:border-gray-800`}
                                    >
                                        <div className="text-lg">{ninja.emoji}</div>
                                    </button>
                                ))}
                            </div>

                            <div className="text-center">
                                <p className="text-sm text-gray-600 japanese-font">
                                    {ninjaCharacters[sequence[currentStep]].name} ã‚’ã‚¿ãƒƒãƒ—ã›ã‚ˆ
                                </p>
                            </div>
                        </div>
                    </div>
                );
            }

            if (gameState === 'result') {
                return (
                    <div className="min-h-screen bg-gradient-to-b from-blue-100 to-purple-100 flex flex-col items-center justify-center p-4">
                        <h1 className="text-4xl font-bold text-blue-800 mb-8 japanese-font">é–‹é‹ï¼ã•ã•ãŒã­è¨˜æ†¶è©¦ç·´</h1>
                        
                        <div className="bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center">
                            <div className="text-6xl mb-6">
                                {success ? 'ğŸ‰' : 'ğŸ˜¢'}
                            </div>
                            
                            <h2 className="text-2xl font-bold mb-4 japanese-font">
                                {success ? 'ã‚²ãƒ¼ãƒ åˆ¶è¦‡ï¼' : 'å¤±æ•—ã›ã‚Š...'}
                            </h2>
                            
                            <p className="text-lg mb-4 japanese-font">
                                {success 
                                    ? 'å…¨ã¦ã®é †åºã‚’æ­£ç¢ºã«å†ç¾ã§ããŸã‚Šï¼' 
                                    : `é–“é•ãˆãŸã‚Šã€‚æ­£è§£ã¯${ninjaCharacters[sequence[currentStep]].name}ã§ã‚ã£ãŸã€‚`
                                }
                            </p>

                            {!success && (
                                <div className="mb-6">
                                    <p className="text-lg text-red-600 font-bold japanese-font">
                                        å¤±æ•—å›æ•°: {failures}
                                    </p>
                                </div>
                            )}

                            <button
                                onClick={resetGame}
                                className="w-full bg-blue-500 hover:bg-blue-600 text-white font-bold py-3 px-6 rounded-lg japanese-font"
                            >
                                {success ? 'æ–°ãŸãªã‚‹è©¦ç·´' : 'å†ã³æŒ‘æˆ¦ã›ã‚“'}
                            </button>
                        </div>
                    </div>
                );
            }

            return null;
        }

        ReactDOM.render(<SasaganeMemoryGame />, document.getElementById('app'));
    </script>
</body>
</html>