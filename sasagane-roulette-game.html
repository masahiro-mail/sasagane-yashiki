<!DOCTYPE html>
<html lang="ja">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ã•ã•ãŒã­ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Shippori+Mincho:wght@400;600;700&family=Zen+Old+Mincho:wght@400;600;700&display=swap');
        .japanese-font {
            font-family: 'Shippori Mincho', 'Zen Old Mincho', serif;
        }
        .roulette-spin {
            animation: spin 3s ease-out;
        }
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(1440deg); }
        }
        .ninja-option {
            transition: all 0.3s ease;
        }
        .ninja-option:hover {
            transform: scale(1.05);
            box-shadow: 0 8px 25px rgba(0, 0, 0, 0.2);
        }
    </style>
</head>
<body class="japanese-font">
    <div id="app"></div>

    <script src="https://unpkg.com/react@18/umd/react.development.js"></script>
    <script src="https://unpkg.com/react-dom@18/umd/react-dom.development.js"></script>
    <script src="https://unpkg.com/@babel/standalone/babel.min.js"></script>

    <script type="text/babel">
        const { useState, useEffect } = React;

        const ninjaOptions = [
            { id: 1, name: 'ã•ã•ãŒã­', color: 'bg-purple-400', emoji: 'ğŸ' },
            { id: 2, name: 'ã•ãã‚„', color: 'bg-yellow-400', emoji: 'â­' },
            { id: 3, name: 'ã¹ã‚“ã¦ã‚“', color: 'bg-pink-400', emoji: 'ğŸŒ¸' },
            { id: 4, name: 'ã„ãšãª', color: 'bg-blue-400', emoji: 'âš¡' },
            { id: 5, name: 'ã“ã¯ã', color: 'bg-green-400', emoji: 'ğŸ’' },
            { id: 6, name: 'ã“ã‚“ãŒ', color: 'bg-orange-400', emoji: 'ğŸŒ™' }
        ];

        function SasaganeRouletteGame() {
            const [gameState, setGameState] = useState('waiting');
            const [failures, setFailures] = useState(0);
            const [success, setSuccess] = useState(false);
            const [selectedOption, setSelectedOption] = useState(null);
            const [winningOption, setWinningOption] = useState(null);
            const [isSpinning, setIsSpinning] = useState(false);

            const spinRoulette = () => {
                if (selectedOption === null) return;

                setIsSpinning(true);
                setGameState('spinning');

                setTimeout(() => {
                    const winning = Math.floor(Math.random() * 6) + 1;
                    setWinningOption(winning);
                    setIsSpinning(false);
                    setGameState('result');

                    if (selectedOption === winning) {
                        setSuccess(true);
                    } else {
                        const newFailures = failures + 1;
                        setFailures(newFailures);
                    }
                }, 3000);
            };

            const resetGame = () => {
                setGameState('waiting');
                setFailures(0);
                setSuccess(false);
                setSelectedOption(null);
                setWinningOption(null);
                setIsSpinning(false);
            };

            const startGame = () => {
                setGameState('selecting');
            };

            if (gameState === 'waiting') {
                return (
                    <div className="min-h-screen bg-gradient-to-b from-orange-100 to-yellow-100 flex flex-col items-center justify-center p-4">
                        <h1 className="text-4xl font-bold text-orange-800 mb-8 japanese-font">é–‹é‹ï¼ã•ã•ãŒã­ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</h1>
                        
                        <div className="bg-white rounded-lg shadow-lg p-8 max-w-md w-full mb-8 text-center">
                            <div className="text-6xl mb-6">ğŸ°</div>
                            <p className="text-lg font-bold text-orange-600 mb-6 japanese-font">é‹å‘½ã®è¼ªãªã‚Š</p>
                            <p className="text-sm text-gray-600 mb-6 japanese-font">
                                å¿è€…ã‚’äºˆæƒ³ã—ã¦ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã«æŒ‘æˆ¦ï¼<br />
                                1å›ã§ã‚‚å½“ãŸã‚Œã°ã‚²ãƒ¼ãƒ åˆ¶è¦‡<br />
                                æ™‚é–“åˆ¶é™ãƒ»å›æ•°åˆ¶é™ãªã—
                            </p>
                            <div className="text-sm text-gray-500 mb-4 japanese-font">
                                å¤±æ•—å›æ•°: {failures}
                            </div>
                        </div>
                        
                        <button
                            onClick={startGame}
                            className="bg-orange-500 hover:bg-orange-600 text-white font-bold py-4 px-8 rounded-lg text-xl japanese-font"
                        >
                            ã‚¿ãƒƒãƒ—ã—ã¦ã‚²ãƒ¼ãƒ ã‚’å§‹ã‚ã‚“
                        </button>
                    </div>
                );
            }

            if (gameState === 'selecting') {
                return (
                    <div className="min-h-screen bg-gradient-to-b from-orange-100 to-yellow-100 flex flex-col items-center justify-center p-4">
                        <h1 className="text-4xl font-bold text-orange-800 mb-8 japanese-font">é–‹é‹ï¼ã•ã•ãŒã­ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</h1>
                        
                        <div className="bg-white rounded-lg shadow-lg p-8 max-w-md w-full">
                            <div className="text-center mb-6">
                                <p className="text-lg font-bold text-gray-700 mb-2 japanese-font">
                                    ã©ã®å¿è€…ãŒå½“ãŸã‚‹ã¨æ€ã†ã‹ï¼Ÿ
                                </p>
                                <p className="text-sm text-gray-500">
                                    å¤±æ•—å›æ•°: {failures}
                                </p>
                            </div>

                            <div className="grid grid-cols-2 gap-3 mb-6">
                                {ninjaOptions.map((option) => (
                                    <button
                                        key={option.id}
                                        onClick={() => setSelectedOption(option.id)}
                                        className={`p-4 rounded-lg border-2 ninja-option 
                                            ${selectedOption === option.id
                                                ? `${option.color} border-gray-800 shadow-lg`
                                                : 'bg-gray-100 border-gray-300 hover:bg-gray-200'
                                            }`}
                                    >
                                        <div className="text-2xl mb-1">{option.emoji}</div>
                                        <div className="text-sm font-bold japanese-font">{option.name}</div>
                                    </button>
                                ))}
                            </div>

                            <button
                                onClick={spinRoulette}
                                disabled={selectedOption === null}
                                className="w-full bg-orange-500 hover:bg-orange-600 disabled:bg-gray-300 text-white font-bold py-3 px-6 rounded-lg japanese-font"
                            >
                                {selectedOption ? 'ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆã‚’å›ã•ã‚“' : 'å¿è€…ã‚’é¸ã¶ã¹ã—'}
                            </button>
                        </div>
                    </div>
                );
            }

            if (gameState === 'spinning') {
                return (
                    <div className="min-h-screen bg-gradient-to-b from-orange-100 to-yellow-100 flex flex-col items-center justify-center p-4">
                        <h1 className="text-4xl font-bold text-orange-800 mb-8 japanese-font">é–‹é‹ï¼ã•ã•ãŒã­ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</h1>
                        
                        <div className="bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center">
                            <div className={`text-6xl mb-6 ${isSpinning ? 'roulette-spin' : ''}`}>ğŸ°</div>
                            <p className="text-2xl font-bold text-orange-600 mb-4 japanese-font">
                                ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆå›è»¢ä¸­...
                            </p>
                            <p className="text-lg text-gray-600 japanese-font">
                                ã‚ãªãŸã®äºˆæƒ³: {ninjaOptions.find(o => o.id === selectedOption)?.name}
                            </p>
                        </div>
                    </div>
                );
            }

            if (gameState === 'result') {
                const winningOptionData = ninjaOptions.find(o => o.id === winningOption);
                const isWin = selectedOption === winningOption;

                return (
                    <div className="min-h-screen bg-gradient-to-b from-orange-100 to-yellow-100 flex flex-col items-center justify-center p-4">
                        <h1 className="text-4xl font-bold text-orange-800 mb-8 japanese-font">é–‹é‹ï¼ã•ã•ãŒã­ãƒ«ãƒ¼ãƒ¬ãƒƒãƒˆ</h1>
                        
                        <div className="bg-white rounded-lg shadow-lg p-8 max-w-md w-full text-center">
                            <div className="text-6xl mb-6">
                                {isWin ? 'ğŸ‰' : 'ğŸ˜¢'}
                            </div>
                            
                            <h2 className="text-2xl font-bold mb-4 japanese-font">
                                {isWin ? 'ã‚²ãƒ¼ãƒ åˆ¶è¦‡ï¼' : 'ã¯ãšã‚ŒãŸã‚Š...'}
                            </h2>
                            
                            <div className="mb-4">
                                <p className="text-lg mb-2 japanese-font">çµæœ: {winningOptionData?.name}</p>
                                <div className={`inline-block p-3 rounded-lg ${winningOptionData?.color}`}>
                                    <div className="text-3xl">{winningOptionData?.emoji}</div>
                                </div>
                            </div>

                            <p className="text-sm text-gray-600 mb-6 japanese-font">
                                ã‚ãªãŸã®äºˆæƒ³: {ninjaOptions.find(o => o.id === selectedOption)?.name}
                            </p>

                            {success ? (
                                <div className="mb-6">
                                    <p className="text-lg text-green-600 font-bold japanese-font">
                                        ãŠã‚ã§ã¨ã†ã”ã–ã‚‹ï¼ğŸŠ
                                    </p>
                                </div>
                            ) : (
                                <div className="mb-6">
                                    <p className="text-lg text-red-600 font-bold japanese-font">
                                        å¤±æ•—å›æ•°: {failures}
                                    </p>
                                </div>
                            )}

                            <button
                                onClick={resetGame}
                                className="w-full bg-orange-500 hover:bg-orange-600 text-white font-bold py-3 px-6 rounded-lg japanese-font"
                            >
                                {success ? 'æ–°ãŸãªã‚‹æŒ‘æˆ¦' : 'å†ã³æŒ‘æˆ¦ã›ã‚“'}
                            </button>
                        </div>
                    </div>
                );
            }

            return null;
        }

        ReactDOM.render(<SasaganeRouletteGame />, document.getElementById('app'));
    </script>
</body>
</html>